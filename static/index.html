<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <title>My Preso</title>

  <link rel="stylesheet" href="./css/reset.css" type="text/css"/>
  <link rel="stylesheet" href="./css/showoff.css" type="text/css"/>

  <script type="text/javascript" src="./js/jquery-1.4.2.min.js"></script>
  <script type="text/javascript" src="./js/jquery.cycle.all.js"></script>
	<script type="text/javascript" src="./js/jquery-print.js"></script>
  <script type="text/javascript" src="./js/jquery.batchImageLoad.js"></script>

  <script type="text/javascript" src="./js/jquery.doubletap-0.1.js"></script>

  <script type="text/javascript" src="./js/fg.menu.js"></script>
  <script type="text/javascript" src="./js/showoff.js"></script>
  <script type="text/javascript" src="./js/jTypeWriter.js"> </script>
  <script type="text/javascript" src="./js/sh_main.min.js"></script>
  <script type="text/javascript" src="./js/core.js"></script>
  <script type="text/javascript" src="./js/showoffcore.js"></script>

  <link type="text/css" href="./css/fg.menu.css" media="screen" rel="stylesheet" />
  <link type="text/css" href="./css/theme/ui.all.css" media="screen" rel="stylesheet" />
  <link type="text/css" href="./css/sh_style.css" rel="stylesheet" >

  

  

  <script type="text/javascript">
  $(function(){
    setupPreso(false, './');
  });
  </script>
</head>

<body>


<a tabindex="0" href="#search-engines" class="fg-button fg-button-icon-right ui-widget ui-state-default ui-corner-all" id="navmenu"><span class="ui-icon ui-icon-triangle-1-s"></span>slides</a>
<div id="navigation" class="hidden"></div>

<div id="help">
  <table>
    <tr><td class="key">space, &rarr;</td><td>next slide</td></tr>
    <tr><td class="key">&larr;</td><td>previous slide</td></tr>
    <tr><td class="key">d</td><td>debug mode</td></tr>
    <tr><td class="key">## &lt;ret&gt;</td><td>go to slide #</td></tr>
    <tr><td class="key">c</td><td>table of contents (vi)</td></tr>
    <tr><td class="key">f</td><td>toggle footer</td></tr>
    <tr><td class="key">r</td><td>reload slides</td></tr>
    <tr><td class="key">z</td><td>toggle help (this)</td></tr>
  </table>
</div>

<div class="buttonNav">
  <input type="submit" onClick="prevStep();" value="prev"/>
  <input type="submit" onClick="nextStep();" value="next"/>
</div>

<div id="preso">loading presentation...</div>
<div id="footer">
  <span id="slideInfo"></span>
  <span id="debugInfo"></span>
  <span id="notesInfo"></span>
</div>

<div id="slides" class="offscreen" style="display:none;">
<div class="slide" data-transition="none">
  <div class="content "/>
  <!-- vim: ft=text:fo=tcqwa" ref="one/01_slide/1">
<p>-->
</div><div class="slide" data-transition="none"><div class="content" ref="one/01_slide/2">
<h1>My Presentation</h1>
</div>
</div><div class="slide" data-transition="none"><div class="content bullets incremental" ref="one/01_slide/3">
<h1>Bullet Points</h1>

<ul>
<li>first point</li>
<li>second point</li>
<li>third point</li>
</ul>

</div>
</div><div class="slide" data-transition="none"><div class="content The project" ref="one/01_slide/4">
<p>We used to use this case as an interview question.  If you're looking for a
solid contract job, you might want to listen carefully.</p>

<p>We were hired to write a social networking website for alumni of a large
university.  The big challenge was that the reference for user data was an
atavistic Oracle database.  An Oracle database application.  Which meant that
we couldn't make any changes to the schema.  So what could we do?</p>

<p>We needed to be able to have our own data to keep track of features our client
wanted.  So, we needed our own separate database.</p>

<p>We considered synchronizing the two databases.  But that's insane, right?</p>

<p>At first, we considered using two completely different databases.  And there's
some sense to that.  Two nice, clean separate resources - ideal.  Consider<br/>
doing joins though: suddenly the query takes seconds to return.</p>

<p>But the alternative is to do synchronization.  And that's insane, right?<br/>
That's what we thought.  Ultimately, we needed to do exactly that.</p>

<p>There was an extra requirement: all changes needed to be confirmed by an
administrative user.</p>

<p>So we wrote a Rails plugin to do exactly that.  The plugin consists of XXXX
parts.</p>

<ul>
<li>acts_as_foreign: this is an ActiveRecord plugin that marks model objects that
resides in the existing database.</li>
<li>acts_as_local: the complement of the above.</li>
<li>field_pair: represents the relationship between fields in the two databases.<br/>
Also encodes the relatioonship between the fields.</li>
<li>synchronization tables: we keep track of differences between the databases
and their results.</li>
</ul>


<p>There was an extra requirement: all changes needed to be confirmed by an
administrative user.  As a reault all differences between the two databases
need to themselves be recorded in a database.  Since we'd already established
that modifications to the legacy database are forbidden, these would need to go
in our local database until an admin could approve them.  Honestly this
requirement was probably a blessing in disguise, because otherwise we might not
have separated the process of scanning for differences from resolving them as
early as we did.</p>

<p>Key to the process of synchronizing records is first scanning them for
differences.  Actually scanning entire tables at once is feasible but
impractical: the scan of a single table can take more than an hour, which lead
to treating scans as if they were made of unicorn poop.</p>

<p>Database scans are not made of onicorn poop.  They just aren't.</p>

<p>The key to letting scans be lightweight is to keep track of where we are at any
point so that we can pick right back up when we get interupted.</p>
</div>
</div></div>

</body>
</html>
